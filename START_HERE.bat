@echo off
chcp 65001 >nul
title Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© ÙˆØ±Ø´ Ø§Ù„ØµÙŠØ§ØºØ© - Valunshy ERP
color 0A

echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo            ğŸ† Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© ÙˆØ±Ø´ Ø§Ù„ØµÙŠØ§ØºØ© ğŸ†
echo               Valunshy Jewelry ERP
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.

:: Ø¹Ø±Ø¶ ØªØ±Ø­ÙŠØ¨ÙŠ ÙˆØ§Ù‚ØªØ±Ø§Ø­ Ø§Ø®ØªØµØ§Ø±
if not exist "%USERPROFILE%\Desktop\Ù†Ø¸Ø§Ù… Ø§Ù„Ø°Ù‡Ø¨ - Valunshy ERP.lnk" (
    echo [! ] Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø®ØªØµØ§Ø± Ù„Ù„Ù†Ø¸Ø§Ù… Ø¹Ù„Ù‰ Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨ØŸ ^(Ù†Ø¹Ù…=1 / Ù„Ø§=2^)
    set /p choice="Ø§Ø®ØªÙŠØ§Ø±Ùƒ: "
    if "%choice%"=="1" (
        call create_desktop_shortcut.bat >nul
    )
    cls
    echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    echo            ğŸ† Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© ÙˆØ±Ø´ Ø§Ù„ØµÙŠØ§ØºØ© ğŸ†
    echo               Valunshy Jewelry ERP
    echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    echo.
)

:: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Python
echo [1/4] ÙØ­Øµ Ù†Ø¸Ø§Ù… Python...
python --version >nul 2>&1
if errorlevel 1 (
    echo âŒ Ø®Ø·Ø£: Python ØºÙŠØ± Ù…Ø«Ø¨Øª Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø²
    echo.
    echo ÙŠØ±Ø¬Ù‰ ØªØ«Ø¨ÙŠØª Python 3.8 Ø£Ùˆ Ø£Ø­Ø¯Ø« Ù…Ù†:
    echo https://www.python.org/downloads/
    echo.
    echo ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ø¯ÙŠØ¯ "Add Python to PATH" Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ«Ø¨ÙŠØª
    pause
    exit /b 1
)
echo âœ… Python Ù…ØªÙˆÙØ±

:: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª ÙˆØªØ«Ø¨ÙŠØªÙ‡Ø§ Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±
echo.
echo [2/4] Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©...
python -c "import django" >nul 2>&1
if errorlevel 1 (
    echo âš ï¸  Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª ØºÙŠØ± Ù…Ø«Ø¨ØªØ©. Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ«Ø¨ÙŠØª...
    pip install -r requirements.txt
    if errorlevel 1 (
        echo âŒ ÙØ´Ù„ ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª
        pause
        exit /b 1
    )
    echo âœ… ØªÙ… ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø¨Ù†Ø¬Ø§Ø­
) else (
    echo âœ… Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ù…ØªÙˆÙØ±Ø©
)

:: ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
echo.
echo [3/4] ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...
python manage.py migrate --noinput >nul 2>&1
python manage.py init_gold >nul 2>&1
echo âœ… Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¬Ø§Ù‡Ø²Ø©

:: ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…
echo.
echo [4/4] ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…...
echo.
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo    Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„ Ø§Ù„Ø¢Ù† Ø¹Ù„Ù‰: http://127.0.0.1:8000
echo    
echo    Ø³ÙŠØªÙ… ÙØªØ­ Ø§Ù„Ù…ØªØµÙØ­ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø®Ù„Ø§Ù„ 3 Ø«ÙˆØ§Ù†ÙŠ...
echo    
echo    Ø§Ø¶ØºØ· Ctrl + C Ù„Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù†Ø¸Ø§Ù…
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.

:: ÙØªØ­ Ø§Ù„Ù…ØªØµÙØ­ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†ÙŠ
start /b cmd /c "timeout /t 3 /nobreak > nul && start "" http://127.0.0.1:8000"

:: ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ±
python manage.py runserver 0.0.0.0:8000

pause
