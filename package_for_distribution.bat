@echo off
chcp 65001 >nul
title ุฅูุดุงุก ุญุฒูุฉ ุงูุชูุฒูุน - Packaging System
color 0B

echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo          ๐ฆ ุฅูุดุงุก ุญุฒูุฉ ุงูุชูุฒูุน ๐ฆ
echo           Valunshy ERP Packaging Tool
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.

:: ุฅูุดุงุก ูุฌูุฏ ุงูุชูุฒูุน
set DIST_FOLDER=Valunshy_ERP_Package
echo [1/5] ุฅูุดุงุก ูุฌูุฏ ุงูุญุฒูุฉ...
if exist "%DIST_FOLDER%" (
    echo      ุชูุธูู ุงููุณุฎุฉ ุงููุฏููุฉ...
    rmdir /s /q "%DIST_FOLDER%"
)
mkdir "%DIST_FOLDER%"
echo โ ุชู ุฅูุดุงุก ุงููุฌูุฏ: %DIST_FOLDER%

:: ูุณุฎ ุงููููุงุช ุงูุฃุณุงุณูุฉ
echo.
echo [2/5] ูุณุฎ ูููุงุช ุงููุธุงู...
echo      - ูููุงุช Django...
xcopy /E /I /Q backend "%DIST_FOLDER%\backend" >nul
xcopy /E /I /Q core "%DIST_FOLDER%\core" >nul
xcopy /E /I /Q crm "%DIST_FOLDER%\crm" >nul
xcopy /E /I /Q finance "%DIST_FOLDER%\finance" >nul
xcopy /E /I /Q inventory "%DIST_FOLDER%\inventory" >nul
xcopy /E /I /Q manufacturing "%DIST_FOLDER%\manufacturing" >nul
xcopy /E /I /Q sales "%DIST_FOLDER%\sales" >nul

echo      - ุงูููุงูุจ ูุงููููุงุช ุงูุซุงุจุชุฉ...
xcopy /E /I /Q templates "%DIST_FOLDER%\templates" >nul
xcopy /E /I /Q static "%DIST_FOLDER%\static" >nul

echo      - ูุงุนุฏุฉ ุงูุจูุงูุงุช...
copy /Y db.sqlite3 "%DIST_FOLDER%\" >nul

echo      - ุงููููุงุช ุงูุฑุฆูุณูุฉ...
copy /Y manage.py "%DIST_FOLDER%\" >nul
copy /Y requirements.txt "%DIST_FOLDER%\" >nul
copy /Y START_HERE.bat "%DIST_FOLDER%\" >nul

echo โ ุชู ูุณุฎ ุงููููุงุช

:: ุฅูุดุงุก ุฏููู ุงููุณุชุฎุฏู
echo.
echo [3/5] ุฅูุดุงุก ุฏููู ุงูุงุณุชุฎุฏุงู...
(
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo          ูุธุงู ุฅุฏุงุฑุฉ ูุฑุด ุงูุตูุงุบุฉ - Valunshy ERP
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo ๐ ุฏููู ุงูุชุดุบูู ุงูุณุฑูุน
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo 1๏ธโฃ  ูุชุทูุจุงุช ุงูุชุดุบูู:
echo    โข Windows 7 ุฃู ุฃุญุฏุซ
echo    โข Python 3.8 ุฃู ุฃุญุฏุซ ^(https://www.python.org/downloads/^)
echo    โข ุงุชุตุงู ุจุงูุฅูุชุฑูุช ููุชุซุจูุช ุงูุฃูู ููุท
echo.
echo 2๏ธโฃ  ุฎุทูุงุช ุงูุชุดุบูู:
echo    โข ุงูุชุญ ููู "START_HERE.bat" ุจุงูุถุบุท ุงููุฒุฏูุฌ
echo    โข ุงูุชุธุฑ ุญุชู ููุชุญ ุงููุชุตูุญ ุชููุงุฆูุงู
echo    โข ุณุชุธูุฑ ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
echo.
echo 3๏ธโฃ  ุจูุงูุงุช ุงูุฏุฎูู ุงูุงูุชุฑุงุถูุฉ:
echo    โข ุงุณู ุงููุณุชุฎุฏู: admin
echo    โข ูููุฉ ุงููุฑูุฑ: admin
echo.
echo 4๏ธโฃ  ููุงุญุธุงุช ูููุฉ:
echo    โข ูุง ุชุบูู ูุงูุฐุฉ ุงูุฃูุงูุฑ ุงูุณูุฏุงุก ุฃุซูุงุก ุงูุนูู
echo    โข ููุฅููุงู: ุงุถุบุท Ctrl + C ูู ูุงูุฐุฉ ุงูุฃูุงูุฑ
echo    โข ูุนูู ุงููุธุงู ุนูู: http://127.0.0.1:8000
echo.
echo 5๏ธโฃ  ูู ุญุงูุฉ ุงููุดุงูู:
echo    โข ุชุฃูุฏ ูู ุชุซุจูุช Python ุจุดูู ุตุญูุญ
echo    โข ุชุฃูุฏ ูู ุฅุถุงูุฉ Python ุฅูู PATH
echo    โข ุชุฃูุฏ ูู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช ูู ุงูุชุดุบูู ุงูุฃูู
echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo ููุฏุนู ุงูููู: ุฑุงุฌุน ููู "ุฏููู_ุงููุณุชุฎุฏู.md"
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
) > "%DIST_FOLDER%\ุงูุฑุฃูู_ุฃููุงู.txt"

echo โ ุชู ุฅูุดุงุก ุฏููู ุงูุงุณุชุฎุฏุงู

:: ูุณุฎ ุฏููู ุงููุณุชุฎุฏู ุงููุงูู
echo.
echo [4/5] ูุณุฎ ุงููุซุงุฆู ุงูุฅุถุงููุฉ...
if exist "ุฏููู_ุงููุณุชุฎุฏู.md" copy /Y "ุฏููู_ุงููุณุชุฎุฏู.md" "%DIST_FOLDER%\" >nul
if exist "user_guide_full.md" copy /Y "user_guide_full.md" "%DIST_FOLDER%\" >nul
echo โ ุชู ูุณุฎ ุงููุซุงุฆู

:: ุถุบุท ุงูุญุฒูุฉ
echo.
echo [5/5] ุฅูุดุงุก ููู ูุถุบูุท...
set ZIP_NAME=Valunshy_ERP_%date:~-4%%date:~3,2%%date:~0,2%.zip
powershell Compress-Archive -Path "%DIST_FOLDER%\*" -DestinationPath "%ZIP_NAME%" -Force
if exist "%ZIP_NAME%" (
    echo โ ุชู ุฅูุดุงุก ุงูุญุฒูุฉ ุงููุถุบูุทุฉ: %ZIP_NAME%
) else (
    echo โ๏ธ  ูู ูุชู ุฅูุดุงุก ุงูููู ุงููุถุบูุท (ุงุฎุชูุงุฑู^)
)

echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo    โ ุงูุชูู ุฅูุดุงุก ุงูุญุฒูุฉ ุจูุฌุงุญ! โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo ๐ ุงููุฌูุฏ: %DIST_FOLDER%
if exist "%ZIP_NAME%" (
    echo ๐ฆ ุงูููู ุงููุถุบูุท: %ZIP_NAME%
)
echo.
echo ููููู ุงูุขู:
echo   1. ูุณุฎ ูุฌูุฏ "%DIST_FOLDER%" ุฅูู ุฃู ุฌูุงุฒ
echo   2. ุฃู ุฅุฑุณุงู ุงูููู ุงููุถุบูุท
echo   3. ุซู ุชุดุบูู "START_HERE.bat"
echo.
pause
explorer "%DIST_FOLDER%"
